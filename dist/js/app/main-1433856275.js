"use strict";!function(O,V,M,B,D){O(function(){var l="active",i="show",t="mobile-open",a="invalid",d="wait",r="go",o="up",s=O("html"),e=O(document),n=O(D),c=O(".page"),u=function(e){return void 0!==e&&e.length};new V(".js-slider",{slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"}}),new V(".js-slider-big",{slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"},on:{init:function(){this.$currentSlideNumber=this.$el.find(".js-slide-current")},slideChange:function(){this.$currentSlideNumber.text(this.realIndex+1)}}});var h=O(".js-tab"),f=O(".soc-hidden");h.on("click",function(e){var t=O(e.target),s=O(t.data("target"));h.removeClass(l),f.hide(),s.show(),t.addClass(l)}),O.widget("app.selectmenu",O.ui.selectmenu,{_drawButton:function(){this._super();var e=this.element.find("[selected]").length,t=this.options.placeholder;!e&&t&&this.buttonItem.text(t)}});var v=O(".js-select");v.each(function(e,t){var s=O(t);s.selectmenu({placeholder:s.data("placeholder")})}),v.length&&c.on("scroll",function(){v.selectmenu("close")}),O.datepicker.regional.ru={closeText:"Закрыть",monthNames:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],monthNamesShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],dayNamesShort:["пн","вт","ср","чт","пт","сб","вс"],dayNamesMin:["пн","вт","ср","чт","пт","сб","вс"],dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},O.datepicker.setDefaults(O.datepicker.regional.ru);var m=O(".js-calendar");m.length&&m.datepicker({}),new M("Tooltip",{attach:".js-info",onOpen:function(){this.setContent(this.source.html())}}),O(".js-accordion").on("click",function(e){var t=O(e.currentTarget).parent(),s=t.hasClass(l);t.toggleClass(l,!s).find(".accordion-hidden").slideToggle(s)});var p=O(".menu-section .menu-hidden"),g=new V(".js-mobile-menu",{slidesPerView:"auto",on:{init:function(){var a=this.slides;a.each(function(e,t){var s=O(t);if(s.is("button")){var n=O(s.data("target"));s.on("click",function(){a.removeClass(l),p.removeClass(i),s.addClass(l),n.addClass(i)})}})}}});O(".js-mobile").on("click",function(){var e=s.hasClass(t);s.toggleClass(t,!e),e||g.slides.each(function(e,t){O(t).hasClass(l)&&g.slideTo(e)})}),n.resize(function(e){1024<e.currentTarget.innerWidth&&s.removeClass(t)}),O(".js-scrollbar").each(function(e,t){new B(t,{autoHide:!1})});var C=".js-file",j=function(e){var t=e.find(C);u(t)&&t.jfilestyle({text:"Выбрать...",placeholder:"Файл не выбран",dragdrop:!1})};j(e);var w=function(e){var t=e.find("input"),s=e.find("textarea"),n=function(e){var t=O(e.currentTarget).parent();t.removeClass(a),t.parent().removeClass(a)};t.on("focus change",n),s.on("focus change",n)};w(e);var x=new M("Modal",{attach:".js-popup",onOpen:function(){var e=this.source,t=O(e.data("target")),s=t.find(C);u(s)&&s.jfilestyle("destroy");var n=t.html();t.html(""),this.setContent(n),j(this.content),w(this.content);var a=D.grecaptcha,i=this.content.find(".g-recaptcha");u(i)&&void 0!==a&&a.hasOwnProperty("render")&&(i.html(""),a.render(i[0]),i.removeAttr("style"));var r=this.content.find(".captcha");u(r)&&r.removeAttr("style")},onCloseComplete:function(){var e=this.source,t=O(e.data("target")),s=this.content.find(C);u(s)&&s.jfilestyle("destroy"),this.content.find(".ok").removeClass("ok");var n=this.content.html();this.setContent(""),t.html(n)}});e.on("closeModal",x.close.bind(x));var y=O(".js-menu"),b=O(".js-menu > ul > li > a, .js-menu > ul > li > button"),T=O(".js-menu-section");b.on("mouseover",function(e){var t=O(e.currentTarget);b.removeClass(l),t.addClass(l),T.html(t.parent().find(".menu-hidden").html()),T.addClass("show"),T.stop().animate({opacity:1},300)}),e.on("mouseover",function(e){var t=O(e.target),s=y.find(t);s.length&&s.parent().find(".menu-hidden").length||T.find(t).length||T.stop().animate({opacity:0},300,function(){b.removeClass(l),T.removeClass("show"),T.html("")})}),e.on("click",".js-project-filter",function(e){var t=O(e.currentTarget),s=t.parent().parent().parent().find(".js-projects"),n=t.parent().parent().find(".js-project-block"),a=s.parent().find("input[name=projectsAjaxFolder]").val(),i={};t.parent().find("button."+l).removeClass(l),t.addClass(l),n.each(function(e,t){var s=O(t),n=s.data("property-code");i[n]=s.find("button."+l).val()||""});var r=s.find(".simplebar-content"),o=r.length?r:s;s.addClass(d),O.ajax({url:a,data:i,success:function(e){o.html(e),s.removeClass(d)}})}),O(".js-search").on("click",function(e){var t=O(e.target),s=t.hasClass(l);t.parent().toggleClass(l),s||t.parent().find("input").focus()});var k="header-wrap--fixed-scroll-top",S="header-wrap--fixed-scroll-bottom",$=O(".js-float"),E=O(".header-back"),I=E.offset().top,N=0;c.scroll(function(e){var t=E.offset().top,s=e.currentTarget.scrollTop;t+I<s?s<N?200+t<N-s&&($.removeClass(S),$.addClass(k),N=s):($.hasClass(k)&&($.removeClass(k),$.addClass(S)),N=s):$.removeClass(k+" "+S)});var P=O(".history > section[hidden]");new V(".js-history",{slidesPerView:"auto",on:{init:function(){var s=this,n=this.slides;n.each(function(e,t){O(t).hasClass(l)&&s.slideTo(e)}),n.on("click",function(e){var t=O(e.currentTarget),s=O(t.data("target"));n.removeClass(l),P.removeClass(i),t.addClass(l),s.addClass(i)})}}}),O(".js-sumo").each(function(e,t){var s=O(t);s.SumoSelect({placeholder:s.data("placeholder")}),s.on("sumo:closing",function(e){var t=!!e.currentTarget.selectedOptions.length;s.toggleClass("selected",t)})});var A=new V(".js-main-slider",{init:!1,slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"},effect:"fade",speed:500,autoplay:{delay:5e3,disableOnInteraction:!1},simulateTouch:!1,breakpoints:{1024:{simulateTouch:!0}},on:{init:function(){var e=this.realIndex;this.$timers=this.$el.find(".js-timer");var t=O(this.slides[e]);O(this.$timers[e]).addClass(r),t.addClass(o)},slideChangeTransitionStart:function(){var e=this.$timers,t=this.previousIndex,s=O(this.slides[t]);O(e[t]).addClass("end"),s.removeClass(o)},slideChangeTransitionEnd:function(){var e=this.$timers,t=this.realIndex,s=this.previousIndex,n=O(this.slides[t]),a=O(e[t]),i=O(this.slides[s]);O(e[s]).removeClass("go end"),a.addClass(r),i.removeClass(o),n.addClass(o)}}});D.exports={mainSlider:A},O(".js-preset").on("click",function(e){var t=O(e.currentTarget),s=O(t.data("target"));t.parent().parent().find("section").attr("hidden",!0),s.removeAttr("hidden"),t.parent().find(".js-preset").removeClass(l),t.addClass(l)})})}(jQuery,Swiper,jBox,SimpleBar,window);