"use strict";!function(M,O,V,B,$){M(function(){var l="active",o="show",t="mobile-open",s="invalid",c="wait",n=M("html"),e=M(document),a=M($),r=M(".page"),i=function(e){return void 0!==e&&e.length};new O(".js-slider",{slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"}}),new O(".js-slider-big",{slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"},on:{init:function(){this.$currentSlideNumber=this.$el.find(".js-slide-current")},slideChange:function(){this.$currentSlideNumber.text(this.realIndex+1)}}});var d=M(".js-tab"),u=M(".soc-hidden");d.on("click",function(e){var t=M(e.target),n=M(t.data("target"));d.removeClass(l),u.hide(),n.show(),t.addClass(l)}),M.widget("app.selectmenu",M.ui.selectmenu,{_drawButton:function(){this._super();var e=this.element.find("[selected]").length,t=this.options.placeholder;!e&&t&&this.buttonItem.text(t)}});var h=M(".js-select");h.each(function(e,t){var n=M(t);n.selectmenu({placeholder:n.data("placeholder")})}),h.length&&r.on("scroll",function(){h.selectmenu("close")}),M.datepicker.regional.ru={closeText:"Закрыть",monthNames:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],monthNamesShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],dayNamesShort:["пн","вт","ср","чт","пт","сб","вс"],dayNamesMin:["пн","вт","ср","чт","пт","сб","вс"],dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},M.datepicker.setDefaults(M.datepicker.regional.ru);var f=M(".js-calendar");f.length&&f.datepicker({}),new V("Tooltip",{attach:".js-info",onOpen:function(){this.setContent(this.source.html())}}),M(".js-accordion").on("click",function(e){var t=M(e.currentTarget).parent(),n=t.hasClass(l);t.toggleClass(l,!n).find(".accordion-hidden").slideToggle(n)});var m=M(".menu-section .menu-hidden"),v=new O(".js-mobile-menu",{slidesPerView:"auto",on:{init:function(){var s=this.slides;s.each(function(e,t){var n=M(t);if(n.is("button")){var a=M(n.data("target"));n.on("click",function(){s.removeClass(l),m.removeClass(o),n.addClass(l),a.addClass(o)})}})}}});M(".js-mobile").on("click",function(){var e=n.hasClass(t);n.toggleClass(t,!e),e||v.slides.each(function(e,t){M(t).hasClass(l)&&v.slideTo(e)})}),a.resize(function(e){1024<e.currentTarget.innerWidth&&n.removeClass(t)}),M(".js-scrollbar").each(function(e,t){new B(t,{autoHide:!1})});var p=".js-file",g=function(e){var t=e.find(p);i(t)&&t.jfilestyle({text:"Выбрать...",placeholder:"Файл не выбран",dragdrop:!1})};g(e);var C=function(e){var t=e.find("input"),n=e.find("textarea"),a=function(e){var t=M(e.currentTarget).parent();t.removeClass(s),t.parent().removeClass(s)};t.on("focus change",a),n.on("focus change",a)};C(e);var j=new V("Modal",{attach:".js-popup",onOpen:function(){var e=this.source,t=M(e.data("target")),n=t.find(p);i(n)&&n.jfilestyle("destroy");var a=t.html();t.html(""),this.setContent(a),g(this.content),C(this.content);var s=$.grecaptcha,o=this.content.find(".g-recaptcha");i(o)&&void 0!==s&&s.hasOwnProperty("render")&&(o.html(""),s.render(o[0]))},onCloseComplete:function(){var e=this.source,t=M(e.data("target")),n=this.content.find(p);i(n)&&n.jfilestyle("destroy"),this.content.find(".ok").removeClass("ok");var a=this.content.html();this.setContent(""),t.html(a)}});e.on("closeModal",j.close.bind(j));var w=M(".js-menu"),b=M(".js-menu > ul > li > a, .js-menu > ul > li > button"),y=M(".js-menu-section");b.on("mouseover",function(e){var t=M(e.currentTarget);b.removeClass(l),t.addClass(l),y.html(t.parent().find(".menu-hidden").html()),y.addClass("show"),y.stop().animate({opacity:1},300)}),e.on("mouseover",function(e){var t=M(e.target),n=w.find(t);n.length&&n.parent().find(".menu-hidden").length||y.find(t).length||y.stop().animate({opacity:0},300,function(){b.removeClass(l),y.removeClass("show"),y.html("")})}),e.on("click",".js-project-filter",function(e){var t=M(e.currentTarget),n=t.parent().parent().parent().find(".js-projects"),a=t.parent().parent().find(".js-project-block"),s=n.parent().find("input[name=projectsAjaxFolder]").val(),o={};t.parent().find("button."+l).removeClass(l),t.addClass(l),a.each(function(e,t){var n=M(t),a=n.data("property-code");o[a]=n.find("button."+l).val()||""});var r=n.find(".simplebar-content"),i=r.length?r:n;n.addClass(c),M.ajax({url:s,data:o,success:function(e){i.html(e),n.removeClass(c)}})}),M(".js-search").on("click",function(e){var t=M(e.target),n=t.hasClass(l);t.parent().toggleClass(l),n||t.parent().find("input").focus()});var x="header-wrap--fixed-scroll-top",k="header-wrap--fixed-scroll-bottom",T=M(".js-float"),S=M(".header-back"),N=S.offset().top,P=0;r.scroll(function(e){var t=S.offset().top,n=e.currentTarget.scrollTop;t+N<n?n<P?200+t<P-n&&(T.removeClass(k),T.addClass(x),P=n):(T.hasClass(x)&&(T.removeClass(x),T.addClass(k)),P=n):T.removeClass(x+" "+k)});var E=M(".history > section[hidden]");new O(".js-history",{slidesPerView:"auto",on:{init:function(){var n=this,a=this.slides;a.each(function(e,t){M(t).hasClass(l)&&n.slideTo(e)}),a.on("click",function(e){var t=M(e.currentTarget),n=M(t.data("target"));a.removeClass(l),E.removeClass(o),t.addClass(l),n.addClass(o)})}}}),M(".js-sumo").each(function(e,t){var n=M(t);n.SumoSelect({placeholder:n.data("placeholder")}),n.on("sumo:closing",function(e){var t=!!e.currentTarget.selectedOptions.length;n.toggleClass("selected",t)})})})}(jQuery,Swiper,jBox,SimpleBar,window);