"use strict";!function(M,B,D,F,W){M(function(){var l="active",i="show",t="mobile-open",a="invalid",d="wait",r="go",o="up",n=M("html"),e=M(document),s=M(W),c=M(".page"),u=function(e){return void 0!==e&&e.length};new B(".js-slider",{slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"}}),new B(".js-slider-big",{slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"},on:{init:function(){this.$currentSlideNumber=this.$el.find(".js-slide-current")},slideChange:function(){this.$currentSlideNumber.text(this.realIndex+1)}}});var h=M(".js-tab"),f=M(".soc-hidden");h.on("click",function(e){var t=M(e.target),n=M(t.data("target"));h.removeClass(l),f.hide(),n.show(),t.addClass(l)}),M.widget("app.selectmenu",M.ui.selectmenu,{_drawButton:function(){this._super();var e=this.element.find("[selected]").length,t=this.options.placeholder;!e&&t&&this.buttonItem.text(t)}}),M.datepicker.regional.ru={closeText:"Закрыть",monthNames:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],monthNamesShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],dayNamesShort:["пн","вт","ср","чт","пт","сб","вс"],dayNamesMin:["пн","вт","ср","чт","пт","сб","вс"],dateFormat:"dd.mm.yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},M.datepicker.setDefaults(M.datepicker.regional.ru);var v=M(".js-calendar");v.length&&v.each(function(e,t){var n=M(t);n.datepicker().parent().on("click",function(e){if("INPUT"!==e.target.tagName){var t=n.datepicker("widget").is(":visible")?"hide":"show";n.datepicker(t)}})}),new D("Tooltip",{attach:".js-info",onOpen:function(){this.setContent(this.source.html())}}),M(".js-accordion").on("click",function(e){var t=M(e.currentTarget).parent(),n=t.hasClass(l);t.toggleClass(l,!n).find(".accordion-hidden").slideToggle(n)});var m=M(".menu-section .menu-hidden"),p=new B(".js-mobile-menu",{slidesPerView:"auto",on:{init:function(){var a=this.slides;a.each(function(e,t){var n=M(t);if(n.is("button")){var s=M(n.data("target"));n.on("click",function(){a.removeClass(l),m.removeClass(i),n.addClass(l),s.addClass(i)})}})}}});M(".js-mobile").on("click",function(){var e=n.hasClass(t);n.toggleClass(t,!e),e||p.slides.each(function(e,t){M(t).hasClass(l)&&p.slideTo(e)})}),s.resize(function(e){1024<e.currentTarget.innerWidth&&n.removeClass(t)}),M(".js-scrollbar").each(function(e,t){new F(t,{autoHide:!1})});var g=".js-file",C=".js-sumo",j=function(e){var t=e.find(g);u(t)&&t.jfilestyle({text:"Выбрать...",placeholder:"Файл не выбран",dragdrop:!1})};j(e);var w=function(e){var t=e.find(C);u(t)&&(t.each(function(e,t){var n=M(t);if(n.SumoSelect({placeholder:n.data("placeholder"),floatWidth:480,locale:["OK","Отмена","Выбрать все"]}),n.on("sumo:closing",function(e){var t=!!e.currentTarget.value;n.toggleClass("selected",t)}),t.hasOwnProperty("sumo")){var s=t.sumo.ul;u(s)&&new F(s[0])}}),c.on("scroll",function(){t.each(function(e,t){t.hasOwnProperty("sumo")&&t.sumo.hideOpts()})}))};w(e);var y=function(e){e.each(function(e,t){t.hasOwnProperty("sumo")&&t.sumo.unload()})},x=function(e){var t=e.find("input"),n=e.find("textarea"),s=function(e){var t=M(e.currentTarget).parent();t.removeClass(a),t.parent().removeClass(a)};t.on("focus change",s),n.on("focus change",s)};x(e);var b=new D("Modal",{attach:".js-popup",isolateScroll:!1,onOpen:function(){var e=this.source,t=M(e.data("target")),n=t.find(g),s=t.find(C);u(n)&&n.jfilestyle("destroy"),u(s)&&y(s);var a=t.html();t.html(""),this.setContent(a),j(this.content),w(this.content),x(this.content);var i=W.grecaptcha,r=this.content.find(".g-recaptcha");u(r)&&void 0!==i&&i.hasOwnProperty("render")&&(r.html(""),i.render(r[0]),r.removeAttr("style"));var o=this.content.find(".captcha");u(o)&&o.removeAttr("style")},onCloseComplete:function(){var e=this.source,t=M(e.data("target")),n=this.content.find(g),s=this.content.find(C);u(n)&&n.jfilestyle("destroy"),u(s)&&y(s),this.content.find(".ok").removeClass("ok");var a=this.content.html();this.setContent(""),t.html(a)}});e.on("closeModal",b.close.bind(b));var T=M(".js-menu"),k=M(".js-menu > ul > li > a, .js-menu > ul > li > button"),S=M(".js-menu-section");k.on("mouseover",function(e){var t=M(e.currentTarget);k.removeClass(l),t.addClass(l),S.html(t.parent().find(".menu-hidden").html()),S.addClass("show"),S.stop().animate({opacity:1},300)}),e.on("mouseover",function(e){var t=M(e.target),n=T.find(t);n.length&&n.parent().find(".menu-hidden").length||S.find(t).length||S.stop().animate({opacity:0},300,function(){k.removeClass(l),S.removeClass("show"),S.html("")})}),e.on("click",".js-project-filter",function(e){var t=M(e.currentTarget),n=t.parent().parent().parent().find(".js-projects"),s=t.parent().parent().find(".js-project-block"),a=n.parent().find("input[name=projectsAjaxFolder]").val(),i={};t.parent().find("button."+l).removeClass(l),t.addClass(l),s.each(function(e,t){var n=M(t),s=n.data("property-code");i[s]=n.find("button."+l).val()||""});var r=n.find(".simplebar-content"),o=r.length?r:n;n.addClass(d),M.ajax({url:a,data:i,success:function(e){o.html(e),n.removeClass(d)}})}),M(".js-search").on("click",function(e){var t=M(e.target),n=t.hasClass(l);t.parent().toggleClass(l),n||t.parent().find("input").focus()});var P="header-wrap--fixed-scroll-top",O="header-wrap--fixed-scroll-bottom",I=M(".js-float"),N=M(".header-back"),$=N.offset().top,E=0;c.scroll(function(e){var t=N.offset().top,n=e.currentTarget.scrollTop;t+$<n?n<E?200+t<E-n&&(I.removeClass(O),I.addClass(P),E=n):(I.hasClass(P)&&(I.removeClass(P),I.addClass(O)),E=n):I.removeClass(P+" "+O)});var A=M(".history > section[hidden]");new B(".js-history",{slidesPerView:"auto",on:{init:function(){var n=this,s=this.slides;s.each(function(e,t){M(t).hasClass(l)&&n.slideTo(e)}),s.on("click",function(e){var t=M(e.currentTarget),n=M(t.data("target"));s.removeClass(l),A.removeClass(i),t.addClass(l),n.addClass(i)})}}});var V=new B(".js-main-slider",{init:!1,slidesPerView:"auto",navigation:{nextEl:".js-next",prevEl:".js-prev"},effect:"fade",speed:500,autoplay:{delay:5e3,disableOnInteraction:!1},simulateTouch:!1,breakpoints:{1024:{simulateTouch:!0}},on:{init:function(){var e=this.realIndex;this.$timers=this.$el.find(".js-timer");var t=M(this.slides[e]);M(this.$timers[e]).addClass(r),t.addClass(o)},slideChangeTransitionStart:function(){var e=this.$timers,t=this.previousIndex,n=M(this.slides[t]);M(e[t]).addClass("end"),n.removeClass(o)},slideChangeTransitionEnd:function(){var e=this.$timers,t=this.realIndex,n=this.previousIndex,s=M(this.slides[t]),a=M(e[t]),i=M(this.slides[n]);M(e[n]).removeClass("go end"),a.addClass(r),i.removeClass(o),s.addClass(o)}}});W.exports={mainSlider:V},M(".js-preset").on("click",function(e){var t=M(e.currentTarget),n=M(t.data("target"));t.parent().parent().find("section").attr("hidden",!0),n.removeAttr("hidden"),t.parent().find(".js-preset").removeClass(l),t.addClass(l)})})}(jQuery,Swiper,jBox,SimpleBar,window);